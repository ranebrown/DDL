 	.syntax unified
 	.cpu cortex-m0
 	.align	2
 	.global	asm_fib
 	.thumb
 	.thumb_func

asm_fib:
	mov r1, r0 			// store function argument in r1 (original value of n)
recursive:
	cmps r1, #1			// check if value of n <= 1
	movle r0, #1		// if n <= 1 return 1
	mov pc, lr			// restore pc (exit function)

	push {lr} 			// store return address
	sub r1, r1, #2 		// get n-2
	bl recursive		// call function recursivley to get fib(n-2)
	push {r0} 			// store n-2 on stack

	add r1, r1, # 		// get n-1
	bl recursive
	pop{r2} 			// pop n-2 off of stack

	add r0, r1, r2		// fib(n-1) + fib(n-2)
	pop {pc}				// exit function
